docker network create pg-network

docker run -d \
  --name pg-database \
  -e POSTGRES_USER=myuser \
  -e POSTGRES_PASSWORD=mypassword \
  -e POSTGRES_DB=mydatabase \
  -v $(pwd)/pg_data:/var/lib/postgresql/data \
  -p 5432:5432 \
  --network=pg-network \
  postgres:15

docker run -d\
    -e PGADMIN_DEFAULT_EMAIL=admin@admin.com \
    -e PGADMIN_DEFAULT_PASSWORD=root \
    -p 8080:80 \
    --network=pg-network \
    --name pgadmin \
    dpage/pgadmin4

url = "https://d37ci6vzurychx.cloudfront.net/trip-data/yellow_tripdata_2024-01.parquet"

python3 ingest_data.py \
    --user=myuser \
    --password=mypassword \
    --host=localhost \
    --port=5432 \
    --db_name=mydatabase \
    --table_name=yellow_taxi_db \
    --url="https://d37ci6vzurychx.cloudfront.net/trip-data/yellow_tripdata_2024-01.parquet"\
    --chunk_size=10000

docker build -t taxi_ingest:v001
docker run -it --network=pg-network \
    taxi_ingest:v001 \
    --user=myuser \
    --password=mypassword \
    --host=pg-database   \
    --port=5432 \
    --db_name=mydatabase \
    --table_name=green_taxi_db \
    --url="https://d37ci6vzurychx.cloudfront.net/trip-data/green_tripdata_2019-10.parquet"\
    --chunk_size=10000

(docker inspect on running image of the postgres, hostname -I, or pg-database if pg-network is the same)

GCP notes:
create SSH: https://cloud.google.com/compute/docs/connect/create-ssh-keys

ssh-keygen -t rsa -f ~/.ssh/KEY_FILENAME -C USERNAME

copy public key from your computer to Compute Engine, Metadata, SSH key

copy VM instance external IP (after being created)

RUN ssh -i ~/.ssh/gcp -o StrictHostKeyChecking=no cwang@(GCP instance external IP) on termminal to create connection between your computer and VM instance